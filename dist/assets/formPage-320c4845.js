import{az as D,R as w,r as b,j as e,Z as p,ae as R,av as E,aw as y,ax as N,ay as S,aA as q,a3 as z,a9 as A,ad as I,ab as $,W as C}from"./index-4d8cba6e.js";import{a as F,d as P,b as T,T as L,c as M,R as V}from"./authContext-0ce16419.js";import{I as k}from"./InputAdornment-3bf93e24.js";import{I as B}from"./IconButton-ac7285fa.js";import{v as H}from"./validateInput-1f60f68b.js";import{B as Z}from"./Box-12b1ac82.js";import"./moment-fbc5633a.js";import"./createBox-3c7366d9.js";const J=D({palette:{mode:"dark"}});function _({register:t,errors:a,getValues:s}){var c,v,f,r,o;const[l,m]=w.useState(!1),[x,g]=w.useState(!1),u=b.useRef(null),i=b.useRef(null),j=d=>{if(d==1&&(m(n=>!n),u.current)){const n=u.current.value.length;setTimeout(()=>{u.current&&(u.current.selectionStart=n,u.current.selectionEnd=n)},0)}if(d==2&&(g(n=>!n),i.current)){const n=i.current.value.length;setTimeout(()=>{i.current&&(i.current.selectionStart=n,i.current.selectionEnd=n)},0)}},h=d=>{d.preventDefault()};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full flex flex-col gap-2",children:e.jsx("div",{className:"w-full flex gap-8 flex-col p-4",children:e.jsxs(F,{theme:J,children:[e.jsx(p,{label:"Empresa",variant:"standard",size:"medium",type:"text",...t("empresa",{required:"Este campo é obrigatório"}),placeholder:"Digite o nome da empresa",error:!!a.empresa,helperText:(c=a.empresa)==null?void 0:c.message}),e.jsx(p,{label:"Email",variant:"standard",size:"medium",type:"text",...t("email",{required:"Este campo é obrigatório"}),placeholder:"Digite seu Email",error:!!a.email,helperText:(v=a.email)==null?void 0:v.message}),e.jsx(R,{mask:"99.999.999/9999-99",maskPlaceholder:"",defaultValue:"",...t("cnpj",{required:"Este campo é obrigatório",pattern:{value:/\d/,message:"Deve conter pelo menos um número"}}),children:d=>{var n;return e.jsx(p,{...d,label:"CNPJ",variant:"standard",size:"medium",type:"text",placeholder:"Digite seu CNPJ",error:!!a.cnpj,helperText:(n=a.cnpj)==null?void 0:n.message})}}),e.jsxs(E,{variant:"standard",children:[e.jsx(y,{htmlFor:"standard-adornment-password",children:"Password"}),e.jsx(N,{type:l?"text":"password",inputRef:u,placeholder:"Digite sua Senha",endAdornment:e.jsx(k,{position:"end",children:e.jsx(B,{"aria-label":"toggle password visibility",onClick:()=>j(1),onMouseDown:h,children:l?e.jsx(P,{}):e.jsx(T,{})})}),...t("senha",{required:"Este campo é obrigatório",pattern:{value:/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[!@#$%^&*(),.?":{}|<>])[a-zA-Z\d!@#$%^&*(),.?":{}|<>]*$/,message:"Deve conter pelo menos uma letra, um número e um caractere especial"}}),error:!!a.senha}),a.senha&&e.jsx(S,{className:"text-red-500",children:(f=a.senha)==null?void 0:f.message})]}),e.jsxs(E,{variant:"standard",children:[e.jsx(y,{htmlFor:"standard-adornment-password",children:"Confirme sua Senha:"}),e.jsx(N,{type:x?"text":"password",inputRef:i,placeholder:"Repita sua Senha",endAdornment:e.jsx(k,{position:"end",children:e.jsx(B,{"aria-label":"toggle password visibility",onClick:()=>j(2),onMouseDown:h,children:x?e.jsx(P,{}):e.jsx(T,{})})}),...t("senhaConfirmacao",{required:"Este campo é obrigatório",validate:d=>d===s("senha")||"As senhas não coincidem"}),error:!!a.senhaConfirmacao,helperText:(r=a.senhaConfirmacao)==null?void 0:r.message}),a.senhaConfirmacao&&e.jsx(S,{className:"text-red-500",children:(o=a.senhaConfirmacao)==null?void 0:o.message})]})]})})})})}const O={production:!1,api:{viaCepApi:"https://viacep.com.br/ws"}},W=t=>q.get(`${O.api.viaCepApi}/${t}/json`),G=D({palette:{mode:"dark"}});function K({register:t,setValue:a,errors:s}){var j,h,c,v,f,r;const[l,m]=w.useState(""),[x,g]=w.useState(""),u=b.useCallback(o=>{a("bairro",o.bairro),a("localidade",o.localidade),a("uf",o.uf),a("logradouro",o.logradouro)},[t]),i=async()=>{try{const o=await W(l);u(o.data),console.log(o.data)}catch(o){console.error("Erro ao buscar CEP:",o),g("Erro ao buscar CEP:")}};return b.useEffect(()=>{l&&a("cep",l)},[l]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full flex flex-col gap-2",children:e.jsx("div",{className:"w-full flex gap-8 flex-col p-4",children:e.jsxs(F,{theme:G,children:[e.jsx(p,{label:"CEP",variant:"standard",size:"medium",type:"text",placeholder:"Digite o CEP",...t("cep",{required:"Este campo é obrigatório",maxLength:{value:9},minLength:{value:8,message:"CEP deve ter pelo menos 5 caracteres"}}),onChange:o=>{const d=o.target.value;m(d),H(d)?g(""):g("Formato de CEP inválido")},onBlur:()=>i(),error:!!s.cep,helperText:(j=s.cep)==null?void 0:j.message}),e.jsx(p,{label:"Logradouro",variant:"standard",size:"medium",type:"text",...t("logradouro",{required:"Este campo é obrigatório"}),error:!!s.logradouro,helperText:(h=s.logradouro)==null?void 0:h.message,focused:!0}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(p,{className:"w-3/4",label:"Bairro",variant:"standard",size:"medium",type:"text",...t("bairro",{required:"Este campo é obrigatório"}),error:!!s.bairro,helperText:(c=s.bairro)==null?void 0:c.message,focused:!0}),e.jsx(p,{className:"w-1/4",label:"Nº:",variant:"standard",size:"medium",type:"number",...t("numero",{required:"Este campo é obrigatório",pattern:{value:/\d/,message:"Deve conter pelo menos um número"}}),error:!!s.numero,helperText:(v=s.numero)==null?void 0:v.message,placeholder:"Número"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(p,{className:"w-2/4",label:"Estado",variant:"standard",size:"medium",type:"text",...t("uf",{required:"Este campo é obrigatório"}),focused:!0,error:!!s.uf,helperText:(f=s.uf)==null?void 0:f.message}),e.jsx(p,{className:"w-2/4",label:"Cidade",variant:"standard",size:"medium",type:"text",...t("localidade",{required:"Este campo é obrigatório"}),error:!!s.localidade,helperText:(r=s.localidade)==null?void 0:r.message,focused:!0})]}),e.jsx(p,{label:"Complemento (Opcional)",variant:"standard",size:"medium",type:"text",...t("complemento"),placeholder:"Digite o complemento"})]})})})})}function Q(t){const[a,s]=b.useState(0);function l(m,x){x&&x.preventDefault(),!(m<0||m>=t.length)&&s(m)}return{currentStep:a,currentComponent:t[a],changeStep:l}}function re(){const{handleSubmit:t,register:a,setValue:s,getValues:l,formState:{errors:m},trigger:x}=z();localStorage.clear(),sessionStorage.clear();const g=r=>{r&&x().then(()=>{t(i)()})},u=[e.jsx(_,{register:a,getValues:l,errors:m}),e.jsx(K,{register:a,setValue:s,errors:m}),e.jsx(V,{updateValidRecaptcha:g})],i=r=>{M(r).then(o=>{console.log(o)}),console.log("Form data submitted:",r)},{currentComponent:j,changeStep:h,currentStep:c}=Q(u),v=A(),f=async r=>{await x()&&h(c+1,r)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen w-full flex justify-center items-center ",children:e.jsx(Z,{className:"my-5 px-4 py-3 form-modal bg-primary-dark-cyan rounded-lg flex justify-between items-center flex-col gap-4",children:e.jsxs("form",{className:"w-full h-full",onSubmit:t(i),children:[e.jsx(I,{onClick:()=>$(v,"/"),underline:"hover",className:"cursor-pointer",children:"Voltar para o site"}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsx("img",{className:"min-h-40 min-w-40 max-h-48 max-w-48",src:L,alt:"tophair-icon"})}),j,e.jsxs("div",{className:"px-4 w-full flex flex-col gap-8",children:[e.jsxs("div",{className:"w-full gap-6 flex columns-2",children:[e.jsx("div",{className:"w-1/2",children:c===1&&e.jsx(C,{variant:"contained",className:"w-full button-login bg-primary-aqua rounded-sm",onClick:r=>h(c-1,r),children:"Voltar"})}),c===0&&e.jsx(C,{variant:"contained",className:"w-1/2 button-login bg-primary-aqua rounded-sm",onClick:f,children:"Próximo"}),c===1&&e.jsx(C,{variant:"contained",className:"w-1/2 button-login bg-primary-aqua rounded-sm",onClick:f,children:"Cadastrar"})]}),e.jsx("p",{className:"text-center text-white text-xs",children:"Copyright © made by Top Hair"})]})]})})})})}export{re as default};
