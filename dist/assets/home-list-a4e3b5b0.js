var u=Object.defineProperty;var j=(s,t,n)=>t in s?u(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var i=(s,t,n)=>(j(s,typeof t!="symbol"?t+"":t,n),n);import{A as p,s as b,r as o,j as e,C as f,L as E,N,T as S,a as T,b as w,c,d as l,e as U}from"./index-16ccea1c.js";class C extends p{constructor(){super();i(this,"agendasUrl");this.agendasUrl="/agendas"}async getUltimosAgendamentos(){const n=this.agendasUrl;return await b("GET",n+`/ultimos-agendamentos/${this.idEmpresa}`)}}const h=new C,m=sessionStorage.getItem("dataEmpresa");if(m!==null){const t=JSON.parse(m).idEmpresa;h.idEmpresa=t}const y=async()=>{try{return await h.getUltimosAgendamentos()}catch(s){return s}};function L(){const[s,t]=o.useState(!1),[n,x]=o.useState(!1),[d,g]=o.useState([]);return o.useEffect(()=>{async function a(){t(!1);try{const r=await y();g(r.data),console.log(r),(r.data==null||r.data.length==0)&&x(!0),t(!0)}catch(r){console.error("Erro ao buscar serviços:",r)}}a()},[]),e.jsx(e.Fragment,{children:e.jsx("section",{className:"w-full h-full",children:e.jsxs(f,{className:"h-full m-5",children:[e.jsx("h2",{className:"m-6 text-2xl font-bold",children:"Últimos Agendamentos"}),e.jsx("div",{className:"m-6",children:s?n?e.jsx(N,{}):e.jsx(S,{className:"shadow-table",children:e.jsxs(T,{sx:{minWidth:650},"aria-label":"simple table",children:[e.jsx(w,{children:e.jsxs(c,{className:"font-bold",children:[e.jsx(l,{align:"center",children:"Nome"}),e.jsx(l,{align:"center",children:"Data Marcada"}),e.jsx(l,{align:"center",children:"Horário"}),e.jsx(l,{align:"center",children:"Status"})]})}),e.jsx(U,{children:d==null?void 0:d.filter(a=>a!=null).map(a=>e.jsxs(c,{sx:{"&:last-child td, &:last-child th":{border:0},marginBottom:100},children:[e.jsx(l,{align:"center",component:"th",scope:"row",children:a==null?void 0:a.nomeUsuario}),e.jsx(l,{align:"center",children:a==null?void 0:a.data}),e.jsx(l,{align:"center",children:a==null?void 0:a.hora}),e.jsx(l,{align:"center",children:a==null?void 0:a.status})]},a==null?void 0:a.id))})]})}):e.jsx(E,{})})]})})})}export{L as default};
