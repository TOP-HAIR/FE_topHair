var u=Object.defineProperty;var p=(t,s,n)=>s in t?u(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var c=(t,s,n)=>(p(t,typeof s!="symbol"?s+"":s,n),n);import{A as b,s as f,r as o,j as e,C as S,L as E,N,T as w,a as T,b as U,c as m,d as l,e as A}from"./index-2e3d6a2d.js";import{h}from"./moment-fbc5633a.js";class Y extends b{constructor(){super();c(this,"agendasUrl");this.agendasUrl="/agendas"}async getUltimosAgendamentos(n){const d=this.agendasUrl;return await f("GET",d+`/ultimos-agendamentos/${n}`)}}const x=new Y,g=sessionStorage.getItem("dataEmpresa");if(g!==null){const s=JSON.parse(g).idEmpresa;x.idEmpresa=s}const C=async()=>{try{const t=sessionStorage.getItem("dataEmpresa");if(t!=null){const n=JSON.parse(t).idEmpresa;return await x.getUltimosAgendamentos(n)}}catch(t){return t}};function L(){const[t,s]=o.useState(!1),[n,d]=o.useState(!1),[i,j]=o.useState([]);return o.useEffect(()=>{async function a(){s(!1);try{const r=await C();j(r.data),console.log(r),(r.data==null||r.data.length==0)&&d(!0),s(!0)}catch(r){console.error("Erro ao buscar serviços:",r)}}a()},[]),e.jsx(e.Fragment,{children:e.jsx("section",{className:"w-full h-full",children:e.jsxs(S,{className:"h-full m-5",children:[e.jsx("h2",{className:"m-6 text-2xl font-bold",children:"Últimos Agendamentos"}),e.jsx("div",{className:"m-6",children:t?n?e.jsx(N,{}):e.jsx(w,{className:"shadow-table",children:e.jsxs(T,{sx:{minWidth:650},"aria-label":"simple table",children:[e.jsx(U,{children:e.jsxs(m,{className:"font-bold",children:[e.jsx(l,{align:"center",children:"idAgenda"}),e.jsx(l,{align:"center",children:"Nome"}),e.jsx(l,{align:"center",children:"Data Marcada"}),e.jsx(l,{align:"center",children:"Horário"}),e.jsx(l,{align:"center",children:"Status"})]})}),e.jsx(A,{children:i==null?void 0:i.filter(a=>a!=null).map(a=>e.jsxs(m,{sx:{"&:last-child td, &:last-child th":{border:0},marginBottom:100},children:[e.jsx(l,{align:"center",component:"th",scope:"row",children:a==null?void 0:a.idUsuario}),e.jsx(l,{align:"center",component:"th",scope:"row",children:a==null?void 0:a.nomeUsuario}),e.jsx(l,{align:"center",children:h(a==null?void 0:a.start).format("DD/MM/YYYY")}),e.jsx(l,{align:"center",children:h(a==null?void 0:a.end).format("DD/MM/YYYY")}),e.jsx(l,{align:"center",children:a==null?void 0:a.title})]},a==null?void 0:a.idAgenda))})]})}):e.jsx(E,{})})]})})})}export{L as default};
