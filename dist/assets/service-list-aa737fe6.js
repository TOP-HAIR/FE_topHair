import{j as e,a7 as j,a8 as S,r as t,a9 as N,C as b,W as d,aa as C,ab as E,L as w,N as y,ac as k,a5 as o}from"./index-82274b1b.js";import{A as L,g as R,a as B}from"./serviceContext-6e830482.js";function T({service:a,onDelete:i,linkEdit:c}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("h3",{className:"font-bold",children:["Serviço: ",a.nomeServico]}),e.jsxs("p",{children:[e.jsx("b",{children:"Tipo: "}),a.categoria]}),e.jsxs("p",{children:[e.jsx("b",{children:"Valor: "}),a.preco]}),e.jsxs("p",{children:[e.jsx("b",{children:"Descrição: "}),a.descricao]})]}),e.jsxs("div",{className:"absolute top-3 right-3 gap-2 flex ",children:[e.jsx(j,{className:"cursor-pointer",onClick:c}),e.jsx(S,{className:"cursor-pointer",onClick:i})]})]})}function V(){const[a,i]=t.useState([]),[c,l]=t.useState(!1),[x,u]=t.useState(!1),v=N(),f=new L,m=async s=>{k(v,`/establishment/service/edit/${s}`)};t.useEffect(()=>{async function s(){l(!1);try{const r=await R();(r==null||r.data.length==0)&&u(!0),r!=null&&i(r.data),console.log(r),l(!0)}catch(r){console.error("Erro ao buscar serviços:",r)}}s()},[]);const h=async()=>{try{await B(),o.fire("Sucesso!","Arquivo Exportado com sucesso!!!","success")}catch(s){o.fire("Errp!","Erro ao exportar arquivo!!!","error"),console.error("Erro ao buscar funcionários",s)}},p=s=>{o.fire({title:"Tem certeza que deseja deletar esse serviço?",text:"Você não será capaz de reverter essa ação!",icon:"warning",showCancelButton:!0,confirmButtonText:"Deletar!",cancelButtonText:"Cancelar",reverseButtons:!1,width:450}).then(async r=>{if(r.isConfirmed)try{await f.deleteService(s);const n=a.filter(g=>g.idServico!==s);i(n),o.fire("Sucesso","Serviço excluído com sucesso.","success")}catch(n){console.error("Erro ao excluir o serviço:",n),o.fire("Erro","Erro ao excluir o serviço.","error")}else r.dismiss===o.DismissReason.cancel&&o.fire("Cancelled","Seu serviço está seguro :)","error")})};return e.jsx(e.Fragment,{children:e.jsxs(b,{className:"m-5 p-6 h-full",children:[e.jsxs("div",{className:"flex justify-between flex-wrap",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Serviços do Estabelecimento"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs(d,{className:"border-lime-700 color-primary-cyan",variant:"outlined",onClick:()=>{h()},children:[e.jsx(C,{})," Exportar .csv"]}),e.jsx(E,{to:"/establishment/service/edit",children:e.jsx(d,{className:"bg-terciary-light-green",variant:"contained",children:"+ Adicionar Serviço"})})]})]}),c?x?e.jsx(y,{}):e.jsx("div",{className:"my-8 grid grid-col-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 2xl:grid-cols-4 gap-8",children:a.map(s=>e.jsx("div",{className:"bg-white w-full grid rounded card-service p-4 relative grow cursor-pointer transform transition-transform duration-300 ease-in-out hover:scale-95",children:e.jsx(T,{service:s,onDelete:()=>p(s.idServico),linkEdit:()=>m(s.idServico)})},s.idServico))}):e.jsx(w,{})]})})}export{V as default};
