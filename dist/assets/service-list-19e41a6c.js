import{j as e,a7 as g,a8 as p,r as t,a9 as j,C as S,aa as N,W as b,L as w,N as C,ab as E,a5 as i}from"./index-7609e3f1.js";import{A as y,g as L}from"./serviceContext-c100fc54.js";function R({service:a,onDelete:o,linkEdit:c}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("h3",{className:"font-bold",children:["Serviço: ",a.nomeServico]}),e.jsxs("p",{children:[e.jsx("b",{children:"Tipo: "}),a.categoria]}),e.jsxs("p",{children:[e.jsx("b",{children:"Valor: "}),a.preco]}),e.jsxs("p",{children:[e.jsx("b",{children:"Descrição: "}),a.descricao]})]}),e.jsxs("div",{className:"absolute top-3 right-3 gap-2 flex ",children:[e.jsx(g,{className:"cursor-pointer",onClick:c}),e.jsx(p,{className:"cursor-pointer",onClick:o})]})]})}function T(){const[a,o]=t.useState([]),[c,l]=t.useState(!1),[d,x]=t.useState(!1),u=j(),f=new y,v=async s=>{E(u,`/establishment/service/edit/${s}`)};t.useEffect(()=>{async function s(){l(!1);try{const r=await L();(r==null||r.data.length==0)&&x(!0),r!=null&&o(r.data),console.log(r),l(!0)}catch(r){console.error("Erro ao buscar serviços:",r)}}s()},[]);const m=s=>{i.fire({title:"Tem certeza que deseja deletar esse serviço?",text:"Você não será capaz de reverter essa ação!",icon:"warning",showCancelButton:!0,confirmButtonText:"Deletar!",cancelButtonText:"Cancelar",reverseButtons:!1,width:450}).then(async r=>{if(r.isConfirmed)try{await f.deleteService(s);const n=a.filter(h=>h.idServico!==s);o(n),i.fire("Sucesso","Serviço excluído com sucesso.","success")}catch(n){console.error("Erro ao excluir o serviço:",n),i.fire("Erro","Erro ao excluir o serviço.","error")}else r.dismiss===i.DismissReason.cancel&&i.fire("Cancelled","Seu serviço está seguro :)","error")})};return e.jsx(e.Fragment,{children:e.jsxs(S,{className:"m-5 p-6 h-full",children:[e.jsxs("div",{className:"flex justify-between flex-wrap",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Serviços do Estabelecimento"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:e.jsx(N,{to:"/establishment/service/edit",children:e.jsx(b,{className:"bg-terciary-light-green",variant:"contained",children:"+ Adicionar Serviço"})})})]}),c?d?e.jsx(C,{}):e.jsx("div",{className:"my-8 grid grid-col-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 2xl:grid-cols-4 gap-8",children:a.map(s=>e.jsx("div",{className:"bg-white w-full grid rounded card-service p-4 relative grow cursor-pointer transform transition-transform duration-300 ease-in-out hover:scale-95",children:e.jsx(R,{service:s,onDelete:()=>m(s.idServico),linkEdit:()=>v(s.idServico)})},s.idServico))}):e.jsx(w,{})]})})}export{T as default};
