import{z as B,r as S,t as q,V as y,j as e,C as z,W as V,J as j,L as k,v as c,X as D,B as b,Y as E,U as O}from"./index-3efc4bb5.js";import{i as R,f as F}from"./validateInput-adf0ef74.js";function P(){var v,x,f,g;const p=B(),[T,u]=S.useState(!1),{handleSubmit:C,register:l,setValue:t,formState:{errors:r}}=q(),{idServico:s}=y();S.useEffect(()=>{async function o(){var a,n,d,m,h;if(console.log(s),s!=null&&s!=null){u(!1);try{const i=await E(s);t("nomeServico",(a=i.data)==null?void 0:a.nomeServico),t("preco",(n=i.data)==null?void 0:n.preco),t("categoria",(d=i.data)==null?void 0:d.preco),t("qtdTempoServico",(m=i.data)==null?void 0:m.qtdTempoServico),t("descricao",(h=i.data)==null?void 0:h.descricao),console.log(i),u(!0)}catch(i){console.error("Erro ao buscar serviços:",i)}}u(!0)}o()},[]);const N=async o=>{let a=o.qtdTempoServico;s==null&&s==null&&(a+=":00");const n=o.preco,d=parseFloat(n.replace(/[^\d.,]/g,"").replace(",",".")),m={categoria:o.categoria,nomeServico:o.nomeServico.trim(),preco:d,descricao:o.descricao.trim(),qtdTempoServico:a};console.log(m)},w=()=>{O.fire({title:"Tem certeza que deseja cancelar esse serviço?",icon:"warning",showCancelButton:!0,cancelButtonText:"Não",cancelButtonColor:"#dc3545",confirmButtonText:"Sim, Tenho!",confirmButtonColor:"#2f9c7f",reverseButtons:!0,width:450}).then(o=>{o.isConfirmed&&j(p,-1)})};return e.jsx(e.Fragment,{children:e.jsx(z,{className:"h-full m-5 p-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(V,{onClick:()=>j(p,-1),underline:"hover",className:"cursor-pointer",children:"Voltar"}),e.jsxs("form",{className:"max-w-screen-lg text-center flex flex-col gap-12",onSubmit:C(N),children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Serviço"}),T?e.jsxs("div",{className:"w-full flex flex-col gap-8",children:[e.jsxs("div",{className:"w-full flex flex-col gap-12",children:[e.jsx(c,{id:"outlined-basic",label:"Nome",variant:"outlined",className:"",placeholder:"Digite o nome do Serviço",size:"small",...l("nomeServico",{required:"Campo é Obrigatório"}),error:!!r.nomeServico,helperText:(v=r.nomeServico)==null?void 0:v.message}),e.jsxs("div",{className:"flex gap-6 w-full",children:[e.jsx(D,{mask:"R$ 999,99",maskChar:"0",defaultValue:"",...l("preco",{required:"Campo é Obrigatório"}),children:o=>{var a;return e.jsx(c,{...o,className:"w-1/2",id:"outlined-basic",label:"Valor",variant:"outlined",placeholder:"Digite o valor do Serviço",size:"small",error:!!r.preco,helperText:(a=r.preco)==null?void 0:a.message})}}),e.jsx(c,{className:"w-1/2",id:"outlined-basic",label:"Tempo",variant:"outlined",placeholder:"Digite o tempo do serviço",size:"small",...l("qtdTempoServico",{required:"Campo é Obrigatório"}),onInput:o=>{R(o),F(o)},error:!!r.qtdTempoServico,helperText:(x=r.qtdTempoServico)==null?void 0:x.message})]}),e.jsx(c,{id:"outlined-basic",label:"Categoria",variant:"outlined",multiline:!0,size:"small",placeholder:"Descreva o Serviço",...l("categoria",{required:"Campo é Obrigatório"}),error:!!r.categoria,helperText:(f=r.categoria)==null?void 0:f.message}),e.jsx(c,{id:"outlined-basic",label:"Descrição",variant:"outlined",multiline:!0,size:"small",rows:8,placeholder:"Descreva o Serviço",...l("descricao",{required:"Campo é Obrigatório"}),error:!!r.descricao,helperText:(g=r.descricao)==null?void 0:g.message})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(b,{className:"w-48",variant:"outlined",onClick:w,children:"Cancelar"}),e.jsx(b,{className:"w-48",variant:"contained",type:"submit",children:"Cadastrar Serviço"})]})]}):e.jsx(k,{})]})]})})})}export{P as default};
